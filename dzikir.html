<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Dzikir Online</title>
  </head>
  <body>
    <h1>Dzikir Online</h1>
    <h2>create by Edo</h2>
    <div id="result"></div>
    <div id="hasil-hitung"></div>
    <div id="selamat"></div>
    <div id="listen"></div>
    <h3>Astaghfirulloh al-adziim alladzii laa ilaha illaa huwal hayyul qayyuumu wa atuubu ilaih.</h3>
    <!-- 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
    <script>
      let i = 0;
      if (annyang) {
        // Let's define a command.
        const commands = {
          apa: () => {
            i+= 1
            console.log(i, JSON.stringify(annyang));
          },
        };

        // Add our commands to annyang
        annyang.addCommands(commands);

        // Start listening.
        annyang.start();
      }
    </script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/annyang/2.6.1/annyang.min.js"></script>
    <script type="application/javascript" src="script.js"></script>
    <script>
      let i = 0;
      let y = 0;
      function Speak() {
        const msg = new SpeechSynthesisUtterance();
        msg.text = "Selamat anda sudah berdzikir sebanyak 3 kali";
        return window.speechSynthesis.speak(msg);
      }
      const hasilHitungDiv = document.getElementById('hasil-hitung');
      const selamat = document.getElementById('selamat');
      const Listen = document.getElementById('listen');
      if (annyang) {
        // Add our commands to annyang
        
        annyang.addCallback('result', function(phrases) {
          var command = phrases[0].replace(/\s/g, '');
          if(command === "الحمدلله"){
            i+=1;
            console.log(`${command} ${i}`);
            hasilHitungDiv.textContent = `${command} Alhamdulillah ${i}`;
            if (Number(i) === 3) {
                    selamat.textContent = `Selamat, Anda sudah berdzikir sebanyak ${i} kali hari ini!`;
                    Speak();
                }
          }
          if(command === "استغفرالله"){
            y+=1;
            console.log(`${command} ${y}`);
            hasilHitungDiv.textContent = `${command} Astaghfirullah ${y}`;
            if (Number(y) === 3) {
                    selamat.textContent = `Selamat, Anda sudah berdzikir sebanyak ${y} kali hari ini!`;
                    Speak();
                }
          }
          // alert("Command recognized: " + command);
          if(command === "استغفراللهالعظيمالذيلاالهالاهوالحيالقيومواتوباليه"){
          hasilHitungDiv.textContent = `Bacaan benar`;
          }
          listen.textContent = `yang terdengar ${command}`;
          
        });
    
        // Tell KITT to use annyang
        annyang.setLanguage('ar');
        SpeechKITT.annyang();
        
        // Define a stylesheet for KITT to use
        SpeechKITT.setStylesheet(
          "https://cdnjs.cloudflare.com/ajax/libs/SpeechKITT/0.3.0/themes/flat.css"
        );
    
        // Render KITT's interface
        SpeechKITT.vroom();
      }
    </script>
    
    
  </body>
</html>
